---
title: "LANDFIRE Powered Historical Fire Regime Reports"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
    theme: 
      version: 4
      bootswatch: flatly
    
    
---

```{r setup, include=FALSE}
library(flexdashboard)
library(leaflet)
library(sf)
library(tidyverse)
```


```{r data prep, message=FALSE, warning=FALSE, include=FALSE}
#  read shape
shp <- st_read("inputs/nps_4k_plus_hectares_conus.shp") %>% 
  st_transform(crs = 4326) %>%
  arrange(UNIT_NAME) 


paths <- list.files('output', pattern = '.html', all.files = TRUE, full.names = TRUE) %>%
  sort()
  

shp <- cbind(shp, paths)
```



##  Need something here



```{r clickable map, echo=FALSE, message=FALSE, warning=FALSE, fig.width=16, fig.height=10}


leaflet(shp) %>%
  addProviderTiles(providers$CartoDB.Positron) %>%
  addPolygons(color = "#404241", weight = 1, smoothFactor = 0.5,
    opacity = 1.0, fillOpacity = 0.5,
    fillColor = "#0b631a",
    highlightOptions = highlightOptions(color = "white", weight = 3,
      bringToFront = TRUE),
    popup = paste0( "To obtain report for  "
                 , shp$UNIT_NAME
                 , "<br>"
                 , "<a href='"
                 , shp$paths
                 , "' target='_blank'>"
                 , "Click Here</a>"
               )
    
    
    
    
    
    )


```



Column {.sidebar data-width=500}
-----------------------------------------------------------------------
<b><font  size="4em" color="#000000">Exploring Historical Fire Regimes with LANDFIRE data</font></b>  


Curious about the historical fire regimes and to practice using parameterized reports in R, I put together this simple dashboard using National Parks Boundaries for units > 4k hectares (~10k acres) (https://data.fs.usda.gov/geodata/edw/datasets.php?dsetCategory=boundaries) and LANDFIRE's Biophysical Settings Data (https://landfire.gov/vegetation/bps).  The total area of these 123 parks was ~ 12M hectares (~ 30M acres).

A few fun facts emerged when summarizing for the top most representative BpSs for each park:

* There was an average of over 810,000 acres of fire each year prior to European Colonization within the parks analyzed here.
* South Florida Everglades Sawgrass Marsh, which occurred in the Big Cypress, Biscayne and Everglades park had the most fire with a total of almost 350,000 acres per year. 
* Almost 50 Biophysical Settings had a Mean Fire Return Interval of less than 5 years, including many prairie, pine and oak woodland types.  

**Click on a park to get a link to a custom report**

![](conus_mfri.jpg){width=100%}

Map of historical Mean Fire Return Invervals made with LANDFIRE Biophysical Settings data (https://landfire.gov/vegetation/bps).


