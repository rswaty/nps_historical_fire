<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Randy Swaty">
<meta name="dcterms.date" content="2025-11-04">

<title>Hiawatha National Forest Historical Fire Regimes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="demo_report_files/libs/clipboard/clipboard.min.js"></script>
<script src="demo_report_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="demo_report_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="demo_report_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="demo_report_files/libs/quarto-html/popper.min.js"></script>
<script src="demo_report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="demo_report_files/libs/quarto-html/anchor.min.js"></script>
<link href="demo_report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="demo_report_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="demo_report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="demo_report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="demo_report_files/libs/bootstrap/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="demo_report_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="demo_report_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="demo_report_files/libs/plotly-binding-4.10.4/plotly.js"></script>

<script src="demo_report_files/libs/typedarray-0.1/typedarray.min.js"></script>

<script src="demo_report_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="demo_report_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="demo_report_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<link href="demo_report_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="demo_report_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

<link href="demo_report_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="demo_report_files/libs/datatables-binding-0.33/datatables.js"></script>

<link href="demo_report_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="demo_report_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="demo_report_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Hiawatha National Forest Historical Fire Regimes</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Randy Swaty </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 4, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<p>LANDFIRE’s <a href="https://www.landfire.gov/vegetation/bps">Biophysical Settings(BpS)</a> tells many stories. Officially it is:</p>
<blockquote class="blockquote">
<p>a modeled representation of the vegetation system that may have been dominant on the landscape prior to Euro-American settlement and is based on both the current biophysical environment and an approximation of modeled past disturbance regimes. LF uses BPS to depict reference conditions of vegetation across landscapes.</p>
</blockquote>
<p>In these reports we do quick summaries of the BpSs and their associated historical fire regime attributes for each National Forest to:</p>
<ol type="1">
<li>Identify the top Biophysical Settings and their extent</li>
<li>Calculate average annual acres burned historically</li>
<li>Explore which fire types were most prevelent (i.e., surfance, mixed or replacement)</li>
</ol>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>From a quick assessment of the BpSs and their historical Mean Fire Return Intervals for <strong>Hiawatha National Forest</strong> we found:</p>
<ul>
<li>There were <strong>23</strong> Biophysical Settings (by name, there may be more if counting by variants). The <strong>Laurentian-Acadian Northern Hardwoods Forest-Hemlock</strong> was the most prevalent overall, with the <strong>Laurentian Pine-Oak Barrens-Jack Pine</strong> having the most fire annually.</li>
<li>For the 10 most common BpSs, roughly <strong>21,302</strong> acres burned annually or <strong>1%</strong> of <strong>Hiawatha National Forest</strong>.</li>
<li>For the 10 most common BpSs, Mean Fire Return Intervals for all fire types combined ranged from <strong>3</strong> to <strong>2040</strong> years, with an area weighted mean of <strong>1154</strong> (weighted by acres of BpSs)</li>
</ul>
<p><br></p>
<div style="text-align: center; font-size: 1.5em; font-weight: bold;">
<p>Overview chart to explore historical fire regime patterns</p>
</div>
<p>The ‘strip chart’ below is intended to introduce the charts that follow.</p>
<ul>
<li>The colors are set by the historical Mean Fire Return Interval, with yellows indicating fewer years between fires, darker colors indicating more years between fires</li>
<li>There is one rectangle per BpS; size of rectangle proportional to acres mapped. BpSs &lt; 1,000ac not shown.</li>
<li>Hover over rectangles to get more information.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-45068c02633144e1549e" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-45068c02633144e1549e">{"x":{"visdat":{"ca542f246f74":["function () ","plotlyVisDat"]},"cur_data":"ca542f246f74","attrs":{"ca542f246f74":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"none","fill":"toself","hoveron":"fills","x":[0,60911,60911,0],"y":[0,0,5,5],"fillcolor":"#FCFDBFFF","line":{"color":"#D3D3D3","width":1},"hoverinfo":"text","text":"<b>Laurentian Pine-Oak Barrens-Jack Pine<\/b><br>Mean Fire Return Interval: 8 years<br>Amount: 60,911 acres","name":"Laurentian Pine-Oak Barrens-Jack Pine","showlegend":false,"inherit":true},"ca542f246f74.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"none","fill":"toself","hoveron":"fills","x":[60911,117305,117305,60911],"y":[0,0,5,5],"fillcolor":"#FECE91FF","line":{"color":"#D3D3D3","width":1},"hoverinfo":"text","text":"<b>Laurentian-Acadian Shrub-Herbaceous Wetland Systems<\/b><br>Mean Fire Return Interval: 18 years<br>Amount: 56,394 acres","name":"Laurentian-Acadian Shrub-Herbaceous Wetland Systems","showlegend":false,"inherit":true},"ca542f246f74.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"none","fill":"toself","hoveron":"fills","x":[117305,119145,119145,117305],"y":[0,0,5,5],"fillcolor":"#FE9F6DFF","line":{"color":"#D3D3D3","width":1},"hoverinfo":"text","text":"<b>North-Central Interior Dry-Mesic Oak Forest and Woodland<\/b><br>Mean Fire Return Interval: 18 years<br>Amount: 1,840 acres","name":"North-Central Interior Dry-Mesic Oak Forest and Woodland","showlegend":false,"inherit":true},"ca542f246f74.3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"none","fill":"toself","hoveron":"fills","x":[119145,315561,315561,119145],"y":[0,0,5,5],"fillcolor":"#F76F5CFF","line":{"color":"#D3D3D3","width":1},"hoverinfo":"text","text":"<b>Laurentian-Acadian Northern Pine(-Oak) Forest-Pine Dominated<\/b><br>Mean Fire Return Interval: 34 years<br>Amount: 196,416 acres","name":"Laurentian-Acadian Northern Pine(-Oak) Forest-Pine Dominated","showlegend":false,"inherit":true},"ca542f246f74.4":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"none","fill":"toself","hoveron":"fills","x":[315561,333361,333361,315561],"y":[0,0,5,5],"fillcolor":"#DE4968FF","line":{"color":"#D3D3D3","width":1},"hoverinfo":"text","text":"<b>Laurentian-Acadian Floodplain Systems<\/b><br>Mean Fire Return Interval: 59 years<br>Amount: 17,800 acres","name":"Laurentian-Acadian Floodplain Systems","showlegend":false,"inherit":true},"ca542f246f74.5":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"none","fill":"toself","hoveron":"fills","x":[333361,612275,612275,333361],"y":[0,0,5,5],"fillcolor":"#B63679FF","line":{"color":"#D3D3D3","width":1},"hoverinfo":"text","text":"<b>Boreal Acidic Peatland Systems<\/b><br>Mean Fire Return Interval: 105 years<br>Amount: 278,914 acres","name":"Boreal Acidic Peatland Systems","showlegend":false,"inherit":true},"ca542f246f74.6":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"none","fill":"toself","hoveron":"fills","x":[612275,684889,684889,612275],"y":[0,0,5,5],"fillcolor":"#8C2981FF","line":{"color":"#D3D3D3","width":1},"hoverinfo":"text","text":"<b>Laurentian-Acadian Pine-Hemlock-Hardwood Forest<\/b><br>Mean Fire Return Interval: 154 years<br>Amount: 72,614 acres","name":"Laurentian-Acadian Pine-Hemlock-Hardwood Forest","showlegend":false,"inherit":true},"ca542f246f74.7":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"none","fill":"toself","hoveron":"fills","x":[684889,769636,769636,684889],"y":[0,0,5,5],"fillcolor":"#641A80FF","line":{"color":"#D3D3D3","width":1},"hoverinfo":"text","text":"<b>Boreal White Spruce-Fir-Hardwood Forest-Inland<\/b><br>Mean Fire Return Interval: 213 years<br>Amount: 84,747 acres","name":"Boreal White Spruce-Fir-Hardwood Forest-Inland","showlegend":false,"inherit":true},"ca542f246f74.8":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"none","fill":"toself","hoveron":"fills","x":[769636,770991,770991,769636],"y":[0,0,5,5],"fillcolor":"#3B0F70FF","line":{"color":"#D3D3D3","width":1},"hoverinfo":"text","text":"<b>Boreal White Spruce-Fir-Hardwood Forest-Coastal<\/b><br>Mean Fire Return Interval: 516 years<br>Amount: 1,355 acres","name":"Boreal White Spruce-Fir-Hardwood Forest-Coastal","showlegend":false,"inherit":true},"ca542f246f74.9":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"none","fill":"toself","hoveron":"fills","x":[770991,909610,909610,770991],"y":[0,0,5,5],"fillcolor":"#150E37FF","line":{"color":"#D3D3D3","width":1},"hoverinfo":"text","text":"<b>Laurentian-Acadian Alkaline Conifer-Hardwood Swamp<\/b><br>Mean Fire Return Interval: 989 years<br>Amount: 138,619 acres","name":"Laurentian-Acadian Alkaline Conifer-Hardwood Swamp","showlegend":false,"inherit":true},"ca542f246f74.10":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"none","fill":"toself","hoveron":"fills","x":[909610,1942975,1942975,909610],"y":[0,0,5,5],"fillcolor":"#000004FF","line":{"color":"#D3D3D3","width":1},"hoverinfo":"text","text":"<b>Laurentian-Acadian Northern Hardwoods Forest-Hemlock<\/b><br>Mean Fire Return Interval: 2040 years<br>Amount: 1,033,365 acres","name":"Laurentian-Acadian Northern Hardwoods Forest-Hemlock","showlegend":false,"inherit":true}},"layout":{"margin":{"b":10,"l":30,"t":10,"r":10},"title":{"text":"","font":{"size":16,"color":"black"},"yref":"paper","y":1.05},"xaxis":{"domain":[0,1],"automargin":true,"showticklabels":false,"showgrid":false,"zeroline":false,"title":[]},"yaxis":{"domain":[0,1],"automargin":true,"showticklabels":false,"showgrid":false,"zeroline":false,"title":[]},"hoverlabel":{"bgcolor":"white"},"annotations":[{"text":"BpSs with less than 1,000 acres removed | Visualization by Randy Swaty","xref":"paper","yref":"paper","x":1,"y":-0.5,"xanchor":"right","showarrow":false,"font":{"size":10,"color":"gray"}}],"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"fillcolor":"#FCFDBFFF","type":"scatter","mode":"none+lines","fill":"toself","hoveron":"fills","x":[0,60911,60911,0],"y":[0,0,5,5],"line":{"color":"#D3D3D3","width":1},"hoverinfo":["text","text","text","text"],"text":"<b>Laurentian Pine-Oak Barrens-Jack Pine<\/b><br>Mean Fire Return Interval: 8 years<br>Amount: 60,911 acres","name":"Laurentian Pine-Oak Barrens-Jack Pine","showlegend":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"#FECE91FF","type":"scatter","mode":"none+lines","fill":"toself","hoveron":"fills","x":[60911,117305,117305,60911],"y":[0,0,5,5],"line":{"color":"#D3D3D3","width":1},"hoverinfo":["text","text","text","text"],"text":"<b>Laurentian-Acadian Shrub-Herbaceous Wetland Systems<\/b><br>Mean Fire Return Interval: 18 years<br>Amount: 56,394 acres","name":"Laurentian-Acadian Shrub-Herbaceous Wetland Systems","showlegend":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"#FE9F6DFF","type":"scatter","mode":"none+lines","fill":"toself","hoveron":"fills","x":[117305,119145,119145,117305],"y":[0,0,5,5],"line":{"color":"#D3D3D3","width":1},"hoverinfo":["text","text","text","text"],"text":"<b>North-Central Interior Dry-Mesic Oak Forest and Woodland<\/b><br>Mean Fire Return Interval: 18 years<br>Amount: 1,840 acres","name":"North-Central Interior Dry-Mesic Oak Forest and Woodland","showlegend":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"#F76F5CFF","type":"scatter","mode":"none+lines","fill":"toself","hoveron":"fills","x":[119145,315561,315561,119145],"y":[0,0,5,5],"line":{"color":"#D3D3D3","width":1},"hoverinfo":["text","text","text","text"],"text":"<b>Laurentian-Acadian Northern Pine(-Oak) Forest-Pine Dominated<\/b><br>Mean Fire Return Interval: 34 years<br>Amount: 196,416 acres","name":"Laurentian-Acadian Northern Pine(-Oak) Forest-Pine Dominated","showlegend":false,"marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"#DE4968FF","type":"scatter","mode":"none+lines","fill":"toself","hoveron":"fills","x":[315561,333361,333361,315561],"y":[0,0,5,5],"line":{"color":"#D3D3D3","width":1},"hoverinfo":["text","text","text","text"],"text":"<b>Laurentian-Acadian Floodplain Systems<\/b><br>Mean Fire Return Interval: 59 years<br>Amount: 17,800 acres","name":"Laurentian-Acadian Floodplain Systems","showlegend":false,"marker":{"color":"rgba(148,103,189,1)","line":{"color":"rgba(148,103,189,1)"}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"#B63679FF","type":"scatter","mode":"none+lines","fill":"toself","hoveron":"fills","x":[333361,612275,612275,333361],"y":[0,0,5,5],"line":{"color":"#D3D3D3","width":1},"hoverinfo":["text","text","text","text"],"text":"<b>Boreal Acidic Peatland Systems<\/b><br>Mean Fire Return Interval: 105 years<br>Amount: 278,914 acres","name":"Boreal Acidic Peatland Systems","showlegend":false,"marker":{"color":"rgba(140,86,75,1)","line":{"color":"rgba(140,86,75,1)"}},"error_y":{"color":"rgba(140,86,75,1)"},"error_x":{"color":"rgba(140,86,75,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"#8C2981FF","type":"scatter","mode":"none+lines","fill":"toself","hoveron":"fills","x":[612275,684889,684889,612275],"y":[0,0,5,5],"line":{"color":"#D3D3D3","width":1},"hoverinfo":["text","text","text","text"],"text":"<b>Laurentian-Acadian Pine-Hemlock-Hardwood Forest<\/b><br>Mean Fire Return Interval: 154 years<br>Amount: 72,614 acres","name":"Laurentian-Acadian Pine-Hemlock-Hardwood Forest","showlegend":false,"marker":{"color":"rgba(227,119,194,1)","line":{"color":"rgba(227,119,194,1)"}},"error_y":{"color":"rgba(227,119,194,1)"},"error_x":{"color":"rgba(227,119,194,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"#641A80FF","type":"scatter","mode":"none+lines","fill":"toself","hoveron":"fills","x":[684889,769636,769636,684889],"y":[0,0,5,5],"line":{"color":"#D3D3D3","width":1},"hoverinfo":["text","text","text","text"],"text":"<b>Boreal White Spruce-Fir-Hardwood Forest-Inland<\/b><br>Mean Fire Return Interval: 213 years<br>Amount: 84,747 acres","name":"Boreal White Spruce-Fir-Hardwood Forest-Inland","showlegend":false,"marker":{"color":"rgba(127,127,127,1)","line":{"color":"rgba(127,127,127,1)"}},"error_y":{"color":"rgba(127,127,127,1)"},"error_x":{"color":"rgba(127,127,127,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"#3B0F70FF","type":"scatter","mode":"none+lines","fill":"toself","hoveron":"fills","x":[769636,770991,770991,769636],"y":[0,0,5,5],"line":{"color":"#D3D3D3","width":1},"hoverinfo":["text","text","text","text"],"text":"<b>Boreal White Spruce-Fir-Hardwood Forest-Coastal<\/b><br>Mean Fire Return Interval: 516 years<br>Amount: 1,355 acres","name":"Boreal White Spruce-Fir-Hardwood Forest-Coastal","showlegend":false,"marker":{"color":"rgba(188,189,34,1)","line":{"color":"rgba(188,189,34,1)"}},"error_y":{"color":"rgba(188,189,34,1)"},"error_x":{"color":"rgba(188,189,34,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"#150E37FF","type":"scatter","mode":"none+lines","fill":"toself","hoveron":"fills","x":[770991,909610,909610,770991],"y":[0,0,5,5],"line":{"color":"#D3D3D3","width":1},"hoverinfo":["text","text","text","text"],"text":"<b>Laurentian-Acadian Alkaline Conifer-Hardwood Swamp<\/b><br>Mean Fire Return Interval: 989 years<br>Amount: 138,619 acres","name":"Laurentian-Acadian Alkaline Conifer-Hardwood Swamp","showlegend":false,"marker":{"color":"rgba(23,190,207,1)","line":{"color":"rgba(23,190,207,1)"}},"error_y":{"color":"rgba(23,190,207,1)"},"error_x":{"color":"rgba(23,190,207,1)"},"xaxis":"x","yaxis":"y","frame":null},{"fillcolor":"#000004FF","type":"scatter","mode":"none+lines","fill":"toself","hoveron":"fills","x":[909610,1942975,1942975,909610],"y":[0,0,5,5],"line":{"color":"#D3D3D3","width":1},"hoverinfo":["text","text","text","text"],"text":"<b>Laurentian-Acadian Northern Hardwoods Forest-Hemlock<\/b><br>Mean Fire Return Interval: 2040 years<br>Amount: 1,033,365 acres","name":"Laurentian-Acadian Northern Hardwoods Forest-Hemlock","showlegend":false,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
</section>
<section id="top-10-biophysical-settings" class="level2">
<h2 class="anchored" data-anchor-id="top-10-biophysical-settings">Top 10 Biophysical Settings</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="demo_report_files/figure-html/bps%20chart-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="fire-return-interval-and-severity-by-biophysical-setting" class="level2">
<h2 class="anchored" data-anchor-id="fire-return-interval-and-severity-by-biophysical-setting">Fire Return Interval and Severity by Biophysical Setting</h2>
<p>The BpS dataset includes multiple attributes including:</p>
<ul>
<li>BPS_CODE Biophysical Settings (BpS) code used by LANDFIRE</li>
<li>ZONE National Land Cover Database Map Zone the BpS relates to</li>
<li>BPS_MODEL Unique BpS model code</li>
<li>BPS_NAME BpS Name</li>
<li>FRI_REPLAC Average historic replacement fire frequency (greater than 75% top kill of vegetation)</li>
<li>FRI_MIXED Average historic mixed fire frequency</li>
<li>FRI_SURFAC Average historic surface fire frequency</li>
<li>FRI_ALL Quantifies the average period between fires (all types).</li>
</ul>
<p>You can download the raw attribute table <a href="https://www.landfire.gov/sites/default/files/CSV/LF2023/LF23_BPS_240.csv">here</a> and the data dictionary <a href="https://www.landfire.gov/sites/default/files/DataDictionary/LF2023/LF23_BPSADD_240.pdf">here</a>.</p>
<p>For the charts and data table below we added some additional calculations such as annual acres burned by fire severity.</p>
<p><em>Also see below for FRI_ALL “All Fires” calculation</em></p>
<section id="mean-fire-return-inverval-by-biophysical-setting" class="level3">
<h3 class="anchored" data-anchor-id="mean-fire-return-inverval-by-biophysical-setting">Mean Fire Return Inverval by Biophysical Setting</h3>
<p>The chart below indicates the total area (in acres) per Biophysical Setting and “All Fires” Mean Fire Return Interval (years, in parentheses). Colors set to match those of the map on the home page, and of the strip chart above.</p>
<p><br></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="demo_report_files/figure-html/bps_area_mfri_chart-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="annual-acres-burned-per-biophysical-setting" class="level3">
<h3 class="anchored" data-anchor-id="annual-acres-burned-per-biophysical-setting">Annual Acres Burned per Biophysical Setting</h3>
<p>The above chart depicts how much of each BpS was on the landscape. The chart below depicts modeled annual acres burned per BpS.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="demo_report_files/figure-html/annual_acres_burned_chart-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="fire-severity-by-biophysical-setting" class="level3">
<h3 class="anchored" data-anchor-id="fire-severity-by-biophysical-setting">Fire Severity by Biophysical Setting</h3>
<p>The chart below depicts Mean Fire Return Interval per Biophysical Setting, split out by fire severity.</p>
<p><br></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="demo_report_files/figure-html/hist%20fire%20panel%20chart-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="almost-raw-historical-fire-regime-data-table" class="level2">
<h2 class="anchored" data-anchor-id="almost-raw-historical-fire-regime-data-table">Almost raw historical fire regime data table</h2>
<p>As noted above for the charts and data table we removed some columns (e.g., color ramp), added some calculations (e.g., annual acres burned) and renamed the columns for easier work in R and for clarity. Below you can filter, sort and explore the data. In the following table:</p>
<ul>
<li>‘fri’ = fire return interval, or the mean number of years between fires</li>
<li>There are several columns that will be ‘off screen’. Look for horizontal scroll bar at the bottom of the table.</li>
<li>the “annual_probability_____” columns refer to the ‘chance’ that a location had that particular type of fire during a year on average.</li>
</ul>
<p>LANDFIRE used the annual probabilities in the original modeling (see <a href="https://esajournals.onlinelibrary.wiley.com/doi/pdf/10.1002/ecs2.3484">Blankenship et al., (2021)</a> for more information). Below is an example of how the math works:</p>
<p>Example calculation of MFRI and annual acres burned for a 1,000 acre ecosystem with a 0.2 annual probability of fire:</p>
<p><br></p>
<p><span class="math display">\[
MFRI = 1/0.2 = 5ys
\]</span> <br></p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-2a060cd1207dbd690b23" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2a060cd1207dbd690b23">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],["Barren-Rock/Sand/Clay","Boreal Acidic Peatland Systems","Boreal Jack Pine-Black Spruce Forest","Boreal White Spruce-Fir-Hardwood Forest-Aspen-Birch","Boreal White Spruce-Fir-Hardwood Forest-Coastal","Boreal White Spruce-Fir-Hardwood Forest-Inland","Central Tallgrass Prairie","Eastern Boreal Floodplain","Laurentian Pine-Oak Barrens","Laurentian Pine-Oak Barrens-Jack Pine","Laurentian-Acadian Alkaline Conifer-Hardwood Swamp","Laurentian-Acadian Floodplain Systems","Laurentian-Acadian Northern Hardwoods Forest-Hemlock","Laurentian-Acadian Northern Pine(-Oak) Forest-Pine Dominated","Laurentian-Acadian Pine-Hemlock-Hardwood Forest","Laurentian-Acadian Shrub-Herbaceous Wetland Systems","North-Central Interior Dry Oak Forest and Woodland","North-Central Interior Dry-Mesic Oak Forest and Woodland","North-Central Interior Maple-Basswood Forest","North-Central Interior Oak Savanna","North-Central Interior Sand and Gravel Tallgrass Prairie","North-Central Oak Barrens","Open Water"],[0,278914,40,557,1355,84747,103,121,490,60911,138619,17800,1033365,196416,72614,56394,3,1840,181,3,1,204,60411],[0,716,82,112,939,250,4,0,109,25,989,0,2040,230,483,18,104,97,1027,66,4,341,0],[0,0,0,243,1147,1468,0,581,75,46,0,435,0,0,1018,0,98,53,0,184,0,246,0],[0,123,0,0,0,0,0,312,5,18,0,68,0,40,291,0,19,48,857,5,87,5,0],[0,105,82,76,516,213,4,203,4,8,989,59,2040,34,154,18,14,18,467,5,3,5,0],[0,0.001396648044692737,0.01219512195121951,0.008928571428571428,0.001064962726304579,0.004,0.25,0,0.009174311926605505,0.04,0.001011122345803842,0,0.0004901960784313725,0.004347826086956522,0.002070393374741201,0.05555555555555555,0.009615384615384616,0.01030927835051546,0.0009737098344693282,0.01515151515151515,0.25,0.002932551319648094,0],[0,0,0,0.00411522633744856,0.0008718395815170009,0.0006811989100817438,0,0.001721170395869191,0.01333333333333333,0.02173913043478261,0,0.002298850574712644,0,0,0.0009823182711198428,0,0.01020408163265306,0.01886792452830189,0,0.005434782608695652,0,0.004065040650406504,0],[0,0.008130081300813009,0,0,0,0,0,0.003205128205128205,0.2,0.05555555555555555,0,0.01470588235294118,0,0.025,0.003436426116838488,0,0.05263157894736842,0.02083333333333333,0.001166861143523921,0.2,0.01149425287356322,0.2,0],[0,0.009523809523809525,0.01219512195121951,0.0131578947368421,0.001937984496124031,0.004694835680751174,0.25,0.004926108374384237,0.25,0.125,0.001011122345803842,0.01694915254237288,0.0004901960784313725,0.02941176470588235,0.006493506493506494,0.05555555555555555,0.07142857142857142,0.05555555555555555,0.002141327623126338,0.2,0.3333333333333333,0.2,0],[0,390,0,5,1,339,26,0,4,2436,140,0,507,854,150,3133,0,19,0,0,0,1,0],[0,0,0,2,1,58,0,0,7,1324,0,41,0,0,71,0,0,35,0,0,0,1,0],[0,2268,0,0,0,0,0,0,98,3384,0,262,0,4910,250,0,0,38,0,1,0,41,0],[0,2656,0,7,3,398,26,1,122,7614,140,302,507,5777,472,3133,0,102,0,1,0,41,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>bps_name<\/th>\n      <th>total_bps_acres<\/th>\n      <th>mean_replacement_fri<\/th>\n      <th>mean_mixed_fri<\/th>\n      <th>mean_surface_fri<\/th>\n      <th>mean_all_fri<\/th>\n      <th>annual_prob_replacement<\/th>\n      <th>annual_prob_mixed<\/th>\n      <th>annual_prob_surface<\/th>\n      <th>annual_prob_all<\/th>\n      <th>annual_acres_replacement<\/th>\n      <th>annual_acres_mixed<\/th>\n      <th>annual_acres_surface<\/th>\n      <th>annual_acres_all<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"fixedHeader":true,"autoWidth":false,"columnDefs":[{"targets":7,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":8,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":9,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":10,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 0, 3, \",\", \".\", null);\n  }"},{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 0, 3, \",\", \".\", null);\n  }"},{"targets":5,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 0, 3, \",\", \".\", null);\n  }"},{"targets":6,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 0, 3, \",\", \".\", null);\n  }"},{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":11,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":12,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":13,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":14,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"targets":3,"width":"250px","render":"function(data, type, row, meta) {\n          return type === 'display' && data.length > 50 ? \n            '<span title=\"' + data + '\">' + data.substr(0, 50) + '...<\/span>' : data;\n        }"},{"className":"dt-right","targets":[2,3,4,5,6,7,8,9,10,11,12,13,14]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"bps_name","targets":1},{"name":"total_bps_acres","targets":2},{"name":"mean_replacement_fri","targets":3},{"name":"mean_mixed_fri","targets":4},{"name":"mean_surface_fri","targets":5},{"name":"mean_all_fri","targets":6},{"name":"annual_prob_replacement","targets":7},{"name":"annual_prob_mixed","targets":8},{"name":"annual_prob_surface","targets":9},{"name":"annual_prob_all","targets":10},{"name":"annual_acres_replacement","targets":11},{"name":"annual_acres_mixed","targets":12},{"name":"annual_acres_surface","targets":13},{"name":"annual_acres_all","targets":14}],"lengthMenu":[[5,10,-1],["5","10","All"]],"order":[],"orderClasses":false}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.columnDefs.3.render","options.columnDefs.4.render","options.columnDefs.5.render","options.columnDefs.6.render","options.columnDefs.7.render","options.columnDefs.8.render","options.columnDefs.9.render","options.columnDefs.10.render","options.columnDefs.11.render","options.columnDefs.12.render","options.columnDefs.13.render"],"jsHooks":[]}</script>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>